# Le Singleton

### ğŸ’¡ Comprendre le design pattern singleton

## ğŸ“ Tes notes

Detaille ce que tu as appris ici
`src/exercise/01.md`ouÂ surÂ uneÂ pageÂ [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

Il existe de nombreux design patterns. on peut les classer en 3 grandes
categories.

- Les designs patterns de crÃ©ation
- Les designs patterns de structure
- Les designs patterns de comportement

CommenÃ§ons avec un design pattern de crÃ©ation trÃ¨s connu : Le Singleton.

Le but du singleton et de sâ€™assurer que lâ€™on aura toujours la mÃªme instance de
classe.

```tsx
class Singleton {
  //1 champs privÃ© static
  private static instance: Singleton
  //le constructeur est privÃ©
  private constructor() {}
  //mÃ©thode static getInstance
  public static getInstance(): Singleton {
    if (!Singleton.instance) {
      Singleton.instance = new Singleton()
    }
    return Singleton.instance
  }
}
```

## Exercice

Dans notre application nous avons une connexion en base de donnÃ©es

```tsx
class DataBaseConnexion {
  public constructor(
    public hostname: string,
    public port: string,
    public protocol: string,
  ) {
    console.log(`Connexion Ã  la BDD ${protocol} ${hostname} ${port}`)
    displayText(
      `Connexion Ã  la BDD ${this.protocol} ${this.hostname} ${this.port}`,
    )
    //const client = new MongoClient(uri)
  }
  public disconnect() {}
  public execute() {}
}
const con = new DataBaseConnexion('localhost', '3301', 'mysql')
```

Le problÃ¨me câ€™est quâ€™une connexion en BDD est trÃ¨s groumant en ressources et
nous voulons Ã©viter que de nombreuses connexion soit ouverte inutilement a
divers endroit du code

```tsx
const con = new DataBaseConnexion('localhost', '3301', 'mysql')
//
const con2 = new DataBaseConnexion('localhost', '3301', 'mysql')
// etc ...
```

- Dans cet exercice converti cette classe en Singleton pour que lâ€™application ne
  puisse avoir quâ€™une seul instance de `DataBaseConnexion`

<aside>
ğŸ’¡ Les info de connexion ne seront plus passÃ© dans le constructeur mais rÃ©cupÃ©rÃ© via des variables dâ€™environnement directement dans la classe

</aside>

- `process.env.bddhostname` â†’ mettre '`localhost`â€™ par default
- `process.env.bddport` â†’ mettre '`3301`â€™ par default
- `process.env.bddprotocol` â†’ mettre '`mysql`â€™ par default

## ğŸœ Feedback

Remplir le formulaire le
[formulaire de FeedBack.](https://go.mikecodeur.com/cours-react-avis?entry.1912869708=TypeScript%20PRO&entry.1430994900=5.Les%20Patterns&entry.533578441=01%20Singleton)
